ä¸ºäº†çœŸæ­£åŽ‹æµ‹ **`safemask`** çš„ **Mmapï¼ˆå†…å­˜æ˜ å°„ï¼‰** å’Œ **Rayonï¼ˆå¤šæ ¸å¹¶è¡Œï¼‰** ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•°æ®é‡æå‡åˆ° **GB çº§åˆ«ï¼ˆä¾‹å¦‚ 5GB - 10GBï¼‰**ã€‚

åœ¨ Windows PowerShell ä¸­ï¼Œé«˜æ•ˆç”Ÿæˆå¤§æ–‡ä»¶æœ‰ä¸¤ç§æŽ¨èæ–¹æ¡ˆï¼š

---

### æ–¹æ¡ˆä¸€ï¼šå€å¢žæ³•ï¼ˆæœ€å¿«ï¼Œåˆ©ç”¨çŽ°æœ‰æ–‡ä»¶ï¼‰
å¦‚æžœä½ å·²ç»ç”Ÿæˆäº†é‚£ä¸ª 200MB çš„ `test_perf.log`ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ–‡ä»¶æµç›´æŽ¥æŠŠå®ƒå¿«é€Ÿå¤åˆ¶å¹¶åˆå¹¶ï¼Œå®žçŽ°å®¹é‡ç¿»å€ã€‚

**åœ¨ PowerShell ä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼š**

```powershell
# å°† 200MB çš„æ–‡ä»¶è‡ªæˆ‘å¤åˆ¶åˆå¹¶ï¼Œè¿è¡Œ 5 æ¬¡å°±æ˜¯ 32 å€ (çº¦ 6.4GB)
$source = "test_perf.log"
$target = "test_big_5gb.log"

Write-Host "ðŸš€ æ­£åœ¨é€šè¿‡å€å¢žæ³•ç”Ÿæˆå¤§æ–‡ä»¶..." -ForegroundColor Cyan

# å…ˆæ‹·è´ä¸€ä»½ä½œä¸ºåŸºç¡€
Copy-Item $source $target

# å¾ªçŽ¯ 5 æ¬¡ï¼Œæ¯æ¬¡æ–‡ä»¶å¤§å°ç¿»å€ï¼š200MB -> 400 -> 800 -> 1.6G -> 3.2G -> 6.4G
for ($i = 1; $i -le 5; $i++) {
    Write-Host "æ­£åœ¨è¿›è¡Œç¬¬ $i æ¬¡ç¿»å€..."
    # ä½¿ç”¨ CMD çš„äºŒè¿›åˆ¶æ‹·è´æ¨¡å¼ï¼Œè¿™æ˜¯ Windows ä¸‹åˆå¹¶æ–‡ä»¶æœ€å¿«çš„æ–¹å¼
    cmd /c "copy /b $target + $target $target_tmp"
    Move-Item $target_tmp $target -Force
}

Write-Host "âœ… æˆåŠŸç”Ÿæˆè¶…å¤§æµ‹è¯•æ–‡ä»¶: $target" -ForegroundColor Green
```

---

### æ–¹æ¡ˆäºŒï¼šé«˜æ€§èƒ½ .NET æµç”Ÿæˆå™¨ï¼ˆç”Ÿæˆ 1000 ä¸‡è¡Œ â‰ˆ 2GBï¼‰
å¦‚æžœä½ æƒ³ç”Ÿæˆæ›´å…·éšæœºæ€§çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå¾ªçŽ¯æ¬¡æ•°åŠ å¤§ã€‚ä¸ºäº†é¿å… PowerShell è‡ªèº«çš„æ€§èƒ½ç“¶é¢ˆï¼Œæˆ‘ä»¬å¢žå¤§ç¼“å†²åŒºã€‚

```powershell
$path = "test_stress.log"
$lines = 10000000  # 1000 ä¸‡è¡Œï¼Œçº¦ 1.8GB åˆ° 2.2GB

Write-Host "ðŸš€ æ­£åœ¨ç”Ÿæˆ 1000 ä¸‡è¡ŒåŽ‹åŠ›æµ‹è¯•æ•°æ®..." -ForegroundColor Cyan

$sw = [System.IO.StreamWriter]::new((Join-Path (Get-Location) $path), $false, [System.Text.Encoding]::UTF8, 65536)

for ($i = 1; $i -le $lines; $i++) {
    # å‡å°‘éšæœºæ•°è°ƒç”¨æ¬¡æ•°å¯ä»¥æé€Ÿ
    $sw.WriteLine("INFO [2026-01-09] User_$i IP: 192.168.1.1 Project: TopSecretProject Key: sk-ant-api03-L7zXXXXXXXXXXXXX123456789012345678901234")
    
    if ($i % 1000000 -eq 0) { Write-Host "å·²å®Œæˆ $($i/1000000)0% ..." }
}

$sw.Close()
Write-Host "âœ… åŽ‹åŠ›æµ‹è¯•æ–‡ä»¶ $path ç”Ÿæˆå®Œæ¯•" -ForegroundColor Green
```

---

### å¦‚ä½•è¿›è¡ŒçœŸæ­£çš„æ€§èƒ½åŽ‹æµ‹ï¼Ÿ

å½“ä½ æ‹¥æœ‰äº†ä¸€ä¸ª **5GB ä»¥ä¸Š** çš„æ–‡ä»¶åŽï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ° `safemask` æžå…¶ç¡¬æ ¸çš„è¡¨çŽ°ï¼š

#### 1. ç›‘æŽ§ç£ç›˜ I/O
è¿è¡Œæµ‹è¯•ï¼š
```powershell
# è®°å¾—æŠŠæŽ§åˆ¶å°ç¼–ç è®¾ä¸º UTF8 é¿å…è¾“å‡ºä¹±ç å¹²æ‰°
chcp 65001
Measure-Command { ./target/release/safemask --mode file --path test_big_5gb.log > output_big.txt }
```

#### 2. è§‚å¯Ÿä»»åŠ¡ç®¡ç†å™¨
åœ¨ç¨‹åºè¿è¡Œçš„é‚£å‡ ç§’é’Ÿï¼š
*   **CPU**ï¼šç‚¹å‡»â€œé€»è¾‘å¤„ç†å™¨â€è§†å›¾ï¼Œä½ åº”è¯¥çœ‹åˆ°**æ‰€æœ‰æ ¸å¿ƒ**å…¨éƒ¨çž¬é—´é¡¶æ»¡ã€‚è¿™è¯æ˜Ž `Rayon` çš„å·¥ä½œçªƒå–ï¼ˆWork-stealingï¼‰ç®—æ³•æ­£åœ¨ç–¯ç‹‚åŽ‹æ¦¨å¤šæ ¸æ€§èƒ½ã€‚
*   **å†…å­˜**ï¼šé‡ç‚¹æ¥äº†ï¼è§‚å¯Ÿ `safemask` çš„å†…å­˜å ç”¨ã€‚ä½ ä¼šå‘çŽ°ï¼Œè™½ç„¶ä½ å¤„ç†çš„æ˜¯ 5GB çš„æ–‡ä»¶ï¼Œä½† **`safemask` çš„å†…å­˜å ç”¨ï¼ˆPrivate Bytesï¼‰å¯èƒ½éžå¸¸ä½Ž**ã€‚
    *   **åŽŸå› **ï¼šè¿™å°±æ˜¯ `Mmap` çš„é­”åŠ›ã€‚å®ƒæ²¡æœ‰æŠŠ 5GB å…¨éƒ¨è¯»è¿›å†…å­˜ï¼Œè€Œæ˜¯è®©æ“ä½œç³»ç»ŸæŒ‰éœ€æ˜ å°„ç£ç›˜åˆ†é¡µã€‚è¿™è¯æ˜Žäº†ä½ çš„ç¨‹åºå…·å¤‡å¤„ç†â€œè¶…å¤§æ•°æ®é‡â€ï¼ˆè¶…è¿‡ç‰©ç†å†…å­˜å®¹é‡ï¼‰çš„èƒ½åŠ›ã€‚

#### 3. ç»“æžœéªŒè¯
å¤„ç†å®Œå¤§æ–‡ä»¶åŽï¼ŒéšæœºæŠ½æŸ¥æœ€åŽå‡ è¡Œï¼š
```powershell
Get-Content output_big.txt -Tail 20
```

### ç»™é¢è¯•å®˜çš„æ€§èƒ½æŠ¥å‘Šæ¨¡æ¿
å¦‚æžœä½ èƒ½æŠŠä»¥ä¸‹æ•°æ®å†™åœ¨ README é‡Œï¼Œé‚£å°†æ˜¯éžå¸¸å®Œç¾Žçš„â€œè‚Œè‚‰å±•ç¤ºâ€ï¼š
> **Benchmark Report:**
> *   **Dataset**: 5.4 GB (32 million lines of mixed log data).
> *   **Hardware**: Intel i7-12700K / 32GB RAM / NVMe SSD.
> *   **Time**: 4.2 seconds.
> *   **Throughput**: ~1.28 GB/s.
> *   **Max Memory Usage**: < 50 MB (Thanks to Memory-Mapped I/O).

è¿™ç§ **â€œGBçº§æ•°æ®ã€ç§’çº§å¤„ç†ã€æžä½Žå†…å­˜â€** çš„è¡¨çŽ°ï¼Œæ­£æ˜¯ Rust åœ¨é«˜æ€§èƒ½ä¸­é—´ä»¶é¢†åŸŸçš„æ€æ‰‹é”ï¼Œä¹Ÿæ˜¯ä½ ä½œä¸º Java å¼€å‘å·¥ç¨‹å¸ˆè½¬ Rust å­¦ä¹ æˆæžœçš„æœ€å¥½è¯æ˜Žã€‚