$path = "test_perf.log"
$lines = 1000000

Write-Host "ğŸš€ æ­£åœ¨ç”Ÿæˆ 100 ä¸‡è¡Œæµ‹è¯•æ•°æ®..." -ForegroundColor Cyan

# 1. å…ˆåˆ›å»ºä¸€ä¸ªéšæœºæ•°å®ä¾‹ (è¿™æ˜¯ä¿®å¤æŠ¥é”™çš„å…³é”®)
$rand = New-Object System.Random

# 2. ä½¿ç”¨ .NET çš„ StreamWriter
$filePath = Join-Path (Get-Location) $path
$sw = [System.IO.StreamWriter]::new($filePath)

for ($i = 1; $i -le $lines; $i++) {
    # 3. ä½¿ç”¨å®ä¾‹æ–¹æ³•è°ƒç”¨ .Next()
    $ip = "$($rand.Next(1,255)).$($rand.Next(0,255)).$($rand.Next(0,255)).$($rand.Next(0,255))"
    
    # ç”ŸæˆåŒ…å«å…³é”®è¯å’Œæ­£åˆ™ç‰¹å¾çš„è¡Œ
    $guid1 = [guid]::NewGuid().ToString("N")
    $line = "INFO [2026-01-09] User_$i (IP: $ip) accessed TopSecretProject using sk-$guid1"
    
    $sw.WriteLine($line)
    
    if ($i % 200000 -eq 0) { Write-Host "è¿›åº¦: å·²å®Œæˆ $i è¡Œ..." }
}

$sw.Close()
Write-Host "âœ… æˆåŠŸç”Ÿæˆæ–‡ä»¶: $path" -ForegroundColor Green